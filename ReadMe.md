# Проектная работа 5 спринта

## Описание бизнес-проблемы

Ваша задача — разработать и интегрировать интеллектуального ассистента в веб-приложение. Проект выходит за рамки простого создания чат-бота и включает полную цепочку разработки и развёртывания решения в продакшн-среду.   

Вы начнёте с загрузки готового веб-приложения из репозитория, представляющего собой основу вашего проекта.

Это приложение уже готово к работе с внешними сервисами, и вам нужно расширить его возможности, интегрировав в него интеллектуального ассистента.   

В качестве платформы для создания и настройки ассистента вы будете использовать Rasa (платформа для построения диалоговых систем, чат-ботов и AI-ассистенотов). За счёт подключения LLM модели вы сделаете ассистента умным.

После того как ассистент будет настроен и запущен, вы интегрируете его с React-приложением через API. Основное внимание будет уделено работе ассистента с текстовыми запросами, распознаванию намерений и предоставлению персонализированных ответов на основе обученной модели. Завершающим этапом работы станет внесение изменений в виртуальную машину с помощью Terraform.

## Подробная инструкция

### Подготовка среды разработки

Выполните следующие шаги:
- Установите IDE в рабочую среду.
- Загрузим проект приложения из репозитория.
- Внимательно изучите React-компоненты приложения.

### Развёртывание веб-приложения

- Загрузите и установите все необходимые зависимости npm install.
- Соберите проект npm run build.
- Запустите проект npm run start.

Результатом этого шага должно быть запущенное приложение ассистента в браузере.

### Установка и настройка окружения

Предварительно установите:
- Python (3.7-3.10): Rasa работает с версиями Python 3.7 и выше, но ниже 3.11.
- pip — менеджер пакетов Python, который будет использоваться для установки Rasa.
- Virtualenv (рекомендуется): использование виртуальной среды для изоляции окружения и зависимостей проекта.
1. Убедитесь, что pip установлен. Выполните команду:
 ```
 python -m ensurepip --upgrade
 ```
 
2. Установите virtualenv, если он ещё не установлен:
 ```
 pip install virtualenv
 ```
 
3. Создайте виртуальное окружение:
 ```
 python -m venv rasa_env
 ```
 
4. Активируйте виртуальное окружение:
 ```
 source rasa_env/bin/activate
```

### Установка Rasa

1. Установите Rasa через pip:
```
pip install rasa
```

2. Установите библиотеку Transformers для работы с предобученными LLM моделями, такими как BERT, GPT:
```
pip install transformers
```

3. Проверьте, что Rasa и окружение установлено, выполните команду:
```
rasa --version
```

Если установка прошла успешно, то вы увидите похожее:
```
Rasa Version      :         3.6.20
```
```
Minimum Compatible Version: 3.5.0
```
```
Rasa SDK Version  :         3.6.2
```
```
Python Version    :         3.10.15
```

### Настройка Rasa и подключение модели

После установки Rasa был инициализирован новый проект Rasa, который создаст структуру вашего проекта:
```
rasa init
```
(была создана директория rasa/)

### Адаптация модели и платформы под русский язык

Для обработки русского языка и использования предобученных моделей, таких как BERT, нужно правильно настроить пайплайн в config.yml. Мы используем модель BERT из ранее установленного пакета transformers.

1. Были заменены файлы конфигурации:
- config.yml
- domain.yml
- data/nlu.yml
- data/rules.yml
- data/stories.yml

2. Выполнили тренировку модели на новой конфигурации:
```
rasa train
```
(была натренерована модель 'models/20250327-130234-chilly-occurrence.tar.gz)

3. Запуск ассистента:
```
rasa run --enable-api
```

4. После запуска ассистента можно запустить React-приложение.

## Предоставление логов

Rasa сервер должен быть запущен, желательно с --enable-api:
```
rasa run --enable-api --cors "*" --debug > rasa_server.log 2>&1
```

- `--cors "*"` — позволяет React-клиенту обращаться к Rasa API.  (если ты нет `--cors "*"`, браузер может блокировать запросы).
- `--debug` — чтобы видеть, что происходит.
- `> rasa_server.log 2>&1` - запись вывода --debug в файл 